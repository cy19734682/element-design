"use strict";(self["webpackChunk_yuechan_element_design"]=self["webpackChunk_yuechan_element_design"]||[]).push([[226],{57226:(t,e,n)=>{n.r(e),n.d(e,{default:()=>m});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("el-card",{attrs:{"body-style":{padding:"0px"}},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",[t._v("栅栏表格")])]},proxy:!0}])},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-container"},[e("div",{staticClass:"app-search-table"},[e("em-search-form",{ref:"searchFormRef",attrs:{size:"mini","form-data":t.searchFormData,btnLoading:""},on:{"on-search":t.search},scopedSlots:t._u([{key:"beginBtnGroup",fn:function(){return[e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.addData()}}},[t._v(" 新增 ")]),e("el-button",{attrs:{type:"danger",size:"mini",disabled:!(t.selectIds&&t.selectIds.length>0)},on:{click:function(e){return t.delData()}}},[t._v(" 删除 ")])]},proxy:!0}])}),e("em-table-page",{ref:"tableRef",attrs:{id:"tablePage",selection:"",url:t.serverUrl+"/bt-table-page",isTable:!1,"row-gutter":15,columns:t.columns,searchData:t.searchData,orderKey:""},on:{"row-click":t.rowClick,"row-selection-change":t.selectionChange,"on-data-change":t.onDataChange}})],1)])]),e("div",{staticClass:"card-footer"},[e("source-code-view",{attrs:{code:t.code1}})],1)]),e("em-form-modal",{ref:"formModalRef",attrs:{title:t.activeRow.id?"编辑":"新增","form-data":t.formData,"form-rules":t.formRules,btnLoading:""},on:{"on-submit":t.onSubmit,"on-close":t.onClose}})],1)},s=[],o=n(95353),l=n(62461);const i="\n<template>\n<div class=\"container\">\n  <div class=\"table-container\">\n    <div class=\"app-search-table\">\n      <em-search-form ref=\"searchFormRef\" size=\"mini\" :form-data=\"searchFormData\" btnLoading @on-search=\"search\">\n        <template #beginBtnGroup>\n          <el-button type=\"success\" size=\"mini\" @click=\"addData()\"> 新增 </el-button>\n          <el-button\n            type=\"danger\"\n            size=\"mini\"\n            :disabled=\"!(selectIds && selectIds.length > 0)\"\n            @click=\"delData()\"\n          >\n            删除\n          </el-button>\n        </template>\n      </em-search-form>\n      <em-table-page\n        id=\"tablePage\"\n        ref=\"tableRef\"\n        selection\n        :url=\"serverUrl + '/bt-table-page'\"\n        :isTable=\"false\"\n        :row-gutter=\"15\"\n        :columns=\"columns\"\n        :searchData=\"searchData\"\n        orderKey=\"\"\n        @row-click=\"rowClick\"\n        @row-selection-change=\"selectionChange\"\n        @on-data-change=\"onDataChange\"\n      />\n    </div>\n  </div>\n  <em-form-modal\n    ref=\"formModalRef\"\n    :title=\"activeRow.id ? '编辑' : '新增'\"\n    :form-data=\"formData\"\n    :form-rules=\"formRules\"\n    btnLoading\n    @on-submit=\"onSubmit\"\n    @on-close=\"onClose\"\n  >\n  </em-form-modal>\n</div>\n</template>\n\n<script>\n\timport { mapGetters } from 'vuex'\n\n\texport default {\n\t\tname: 'emRowPageEx',\n\t\tcomputed: {\n\t\t\t...mapGetters(['serverUrl'])\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tactiveRow: {},\n\t\t\t\tselectIds: [],\n\t\t\t\tsearchData: {},\n\t\t\t\tsearchFormData: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'input',\n\t\t\t\t\t\tkey: 'name',\n\t\t\t\t\t\tplaceholder: '名称'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'input',\n\t\t\t\t\t\tplaceholder: '类型',\n\t\t\t\t\t\tkey: 'mimeType'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'select',\n\t\t\t\t\t\tplaceholder: '后缀',\n\t\t\t\t\t\tkey: 'extension',\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'jpg',\n\t\t\t\t\t\t\t\tval: '.jpg'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'html',\n\t\t\t\t\t\t\t\tval: '.html'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'png',\n\t\t\t\t\t\t\t\tval: '.png'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'jpeg',\n\t\t\t\t\t\t\t\tval: '.jpeg'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tcolumns: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'id',\n\t\t\t\t\t\tlabel: 'ID',\n\t\t\t\t\t\trender: (h, params) => {\n\t\t\t\t\t\t\treturn h('el-image', {\n\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\theight: '200px'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\t\tsrc: window.global.serverImg + params.row.imgPath\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'name',\n\t\t\t\t\t\tlabel: '名称'\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tformData: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'input',\n\t\t\t\t\t\tlabel: '名称',\n\t\t\t\t\t\tkey: 'name'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'input',\n\t\t\t\t\t\tlabel: '类型',\n\t\t\t\t\t\tkey: 'mimeType'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'select',\n\t\t\t\t\t\tlabel: '后缀',\n\t\t\t\t\t\tkey: 'extension',\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'jpg',\n\t\t\t\t\t\t\t\tval: '.jpg'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'html',\n\t\t\t\t\t\t\t\tval: '.html'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'png',\n\t\t\t\t\t\t\t\tval: '.png'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: 'jpeg',\n\t\t\t\t\t\t\t\tval: '.jpeg'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tformRules: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\trequired: true\n\t\t\t\t\t},\n\t\t\t\t\tmimeType: {\n\t\t\t\t\t\trequired: true\n\t\t\t\t\t},\n\t\t\t\t\textension: {\n\t\t\t\t\t\trequired: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * 搜索\n\t\t\t */\n\t\t\tsearch(data) {\n\t\t\t\tthis.searchData = window._.cloneDeep(data)\n\t\t\t},\n\t\t\trowClick(row) {\n\t\t\t\tconsole.log(row)\n\t\t\t},\n\t\t\t/**\n\t\t\t * 复选框选择回调\n\t\t\t * @param selection\n\t\t\t */\n\t\t\tselectionChange(selection) {\n\t\t\t\tconsole.log(selection)\n\t\t\t\tthis.selectIds = selection.map((item) => item.id)\n\t\t\t},\n\t\t\t/**\n\t\t\t * 列表加载完成回调\n\t\t\t */\n\t\t\tonDataChange() {\n\t\t\t\tthis.$refs.searchFormRef.changeLoading(false)\n\t\t\t},\n\t\t\taddData() {\n\t\t\t\tthis.$refs.formModalRef.open()\n\t\t\t},\n\t\t\t/**\n\t\t\t * 删除数据\n\t\t\t */\n\t\t\tdelData(id) {\n\t\t\t\tlet ids = ''\n\t\t\t\tif (this.isValidVal(id)) {\n\t\t\t\t\tids = id\n\t\t\t\t} else {\n\t\t\t\t\tif (this.selectIds.length <= 0) {\n\t\t\t\t\t\tthis.$message.warning('请选择数据')\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tids = this.selectIds.join()\n\t\t\t\t}\n\t\t\t\tthis.$msgbox\n\t\t\t\t\t.confirm('是否确认删除', '提示')\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.$request\n\t\t\t\t\t\t\t.delete(this.serverUrl + '/bt-table', { ids })\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tthis.$message.success('删除成功')\n\t\t\t\t\t\t\t\tthis.$refs.tableRef.getTableData()\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch()\n\t\t\t\t\t})\n\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\tconsole.log(e)\n\t\t\t\t\t})\n\t\t\t},\n\t\t\t/**\n\t\t\t * 关闭弹框\n\t\t\t */\n\t\t\tonClose() {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.$refs.formModalRef.resetForm()\n\t\t\t\t\tthis.activeRow = {}\n\t\t\t\t}, 200)\n\t\t\t},\n\t\t\t/**\n\t\t\t * 新增 or 编辑\n\t\t\t */\n\t\t\tonSubmit(data) {\n\t\t\t\tlet method = 'post'\n\t\t\t\tif (this.activeRow.id) {\n\t\t\t\t\tmethod = 'put'\n\t\t\t\t\tdata['id'] = this.activeRow.id\n\t\t\t\t}\n\t\t\t\tthis.$request[method](this.serverUrl + '/bt-table', data, {\n\t\t\t\t\tisShowLoading: true\n\t\t\t\t})\n\t\t\t\t\t.then((e) => {\n\t\t\t\t\t\tthis.$message.success(method === 'post' ? '新增成功' : '编辑成功')\n\t\t\t\t\t\tthis.$refs.tableRef.getTableData()\n\t\t\t\t\t\tthis.$refs.formModalRef.changeLoading(false)\n\t\t\t\t\t\tthis.$refs.formModalRef.close()\n\t\t\t\t\t\tthis.onClose()\n\t\t\t\t\t})\n\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\tthis.$refs.formModalRef.changeLoading(false)\n\t\t\t\t\t})\n\t\t\t},\n\t\t}\n\t}\n<\/script>\n<style scoped lang=\"scss\">\n  .table-container {\n    position: relative;\n    height: 800px;\n  }\n</style>\n",r={name:"emRowPageEx",components:{sourceCodeView:l.A},computed:{...(0,o.L8)(["serverUrl"])},data(){return{code1:i,activeRow:{},selectIds:[],searchData:{},searchFormData:[{type:"input",key:"name",placeholder:"名称"},{type:"input",placeholder:"类型",key:"mimeType"},{type:"select",placeholder:"后缀",key:"extension",options:[{label:"jpg",val:".jpg"},{label:"html",val:".html"},{label:"png",val:".png"},{label:"jpeg",val:".jpeg"}]}],columns:[{key:"id",label:"ID",render:(t,e)=>t("el-image",{style:{width:"100%",height:"200px"},attrs:{src:window.global.serverImg+e.row.imgPath}})},{key:"name",label:"名称"}],formData:[{type:"input",label:"名称",key:"name"},{type:"input",label:"类型",key:"mimeType"},{type:"select",label:"后缀",key:"extension",options:[{label:"jpg",val:".jpg"},{label:"html",val:".html"},{label:"png",val:".png"},{label:"jpeg",val:".jpeg"}]}],formRules:{name:{required:!0},mimeType:{required:!0},extension:{required:!0}}}},methods:{search(t){this.searchData=window._.cloneDeep(t)},rowClick(t){console.log(t)},selectionChange(t){console.log(t),this.selectIds=t.map((t=>t.id))},onDataChange(){this.$refs.searchFormRef.changeLoading(!1)},addData(){this.$refs.formModalRef.open()},delData(t){let e="";if(this.isValidVal(t))e=t;else{if(this.selectIds.length<=0)return void this.$message.warning("请选择数据");e=this.selectIds.join()}this.$msgbox.confirm("是否确认删除","提示").then((()=>{this.$request.delete(this.serverUrl+"/bt-table",{ids:e}).then((()=>{this.$message.success("删除成功"),this.$refs.tableRef.getTableData()})).catch()})).catch((t=>{console.log(t)}))},onClose(){setTimeout((()=>{this.$refs.formModalRef.resetForm(),this.activeRow={}}),200)},onSubmit(t){let e="post";this.activeRow.id&&(e="put",t["id"]=this.activeRow.id),this.$request[e](this.serverUrl+"/bt-table",t,{isShowLoading:!0}).then((t=>{this.$message.success("post"===e?"新增成功":"编辑成功"),this.$refs.tableRef.getTableData(),this.$refs.formModalRef.changeLoading(!1),this.$refs.formModalRef.close(),this.onClose()})).catch((t=>{this.$refs.formModalRef.changeLoading(!1)}))}}},c=r;var d=n(81656),h=(0,d.A)(c,a,s,!1,null,"50dab891",null);const m=h.exports},62461:(t,e,n)=>{n.d(e,{A:()=>c});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"source-container"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"source-box"},[e("highlight-code",{attrs:{lang:"vue"}},[t._v(t._s(t.code))])],1),e("div",{staticClass:"example-control",class:{show:t.show},on:{click:function(e){t.show=!t.show}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}]},[e("i",{staticClass:"el-icon-arrow-down"}),t._v(" "+t._s(t.$t("button.viewSourceCode"))+" ")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[e("i",{staticClass:"el-icon-arrow-up"}),t._v(" "+t._s(t.$t("button.hideSourceCode"))+" ")])])])},s=[];const o={name:"sourceCodeView",props:{code:{default:""}},data(){return{show:!1}}},l=o;var i=n(81656),r=(0,i.A)(l,a,s,!1,null,"551d54ba",null);const c=r.exports}}]);